

# 进环境
cd ~/Desktop/RTDP
conda activate equidiff
或者conda activate dp_sim


# 数据集训练与评估
CUDA_VISIBLE_DEVICES=0 HYDRA_FULL_ERROR=1 
CUDA_VISIBLE_DEVICES=1 HYDRA_FULL_ERROR=1 
## stack_d1 
### 训练 demo 200 batch_size 64
python train_sim.py --config-name=robomimic_dp_ddim_noise_heun_rt_v8 task_name=stack_d1 n_demo=200 
### 评估 epoch=330指标最好，100%衰减到92
python eval_sim.py --checkpoint /home/hy/Desktop/dp_rt/data/outputs/2025.09.29/02.32.01_diff_c_stack_d1/checkpoints/latest.ckpt -o data/stack_d1_eval_output_0929_0232_latest

## coffee_d0
### 训练 demo 200 batch_size 64 显存占用 45GB
python train_sim.py --config-name=robomimic_dp_ddim_noise_heun_rt_v8 task_name=coffee_d0 n_demo=200
### 评估
python eval_sim.py --checkpoint  -o 

## coffee_preparation_d0
### 训练 demo 200 batch_size 64  显存占用 45GB
python train_sim.py --config-name=robomimic_dp_ddim_noise_heun_rt_v8 task_name=coffee_preparation_d0 n_demo=200
### 评估
python eval_sim.py --checkpoint  -o 

## stack_three_d1
### 训练
python train_sim.py --config-name=robomimic_dp_ddim_noise_heun_rt_v8 task_name=stack_three_d1 n_demo=200
### 评估
python eval_sim.py --checkpoint  -o 
#### 两江4090-0

## square_d0
### 训练
python train_sim.py --config-name=robomimic_dp_ddim_noise_heun_rt_v8 task_name=square_d0 n_demo=200
### 评估
python eval_sim.py --checkpoint  -o 
#### 两江4090-1


## hammer_cleanup_d0
### 训练 demo 200 batch_size 64
python train_sim.py --config-name=robomimic_dp_ddim_noise_heun_rt_v8 task_name=hammer_cleanup_d0 n_demo=200 
### 评估
python eval_sim.py --checkpoint  -o 
#### 4090上训练 batch_size 32 21.7gb
demo 50
batch——size 64
爆内存

demo 50
batch——size 32
19gb

demo 100
batch——size 32
21gb

demo 200
batch——size 32
21gb



# 数据集训练与评估
CUDA_VISIBLE_DEVICES=0 HYDRA_FULL_ERROR=1 
CUDA_VISIBLE_DEVICES=1 HYDRA_FULL_ERROR=1 
## stack_d1 
### 训练 demo 200 batch_size 64
python train_sim.py --config-name=robomimic_dp_ddim_noise_heun_rt_v8 task_name=stack_d1 n_demo=200 
### 评估 epoch=330指标最好，100%衰减到92
python eval_sim.py --checkpoint /home/hy/Desktop/dp_rt/data/outputs/2025.09.29/02.32.01_diff_c_stack_d1/checkpoints/latest.ckpt -o data/stack_d1_eval_output_0929_0232_latest





## 
### 训练
python train_sim.py --config-name=robomimic_dp_ddim_noise_heun_rt_v8 task_name= n_demo=200
### 评估
python eval_sim.py --checkpoint  -o 



# 性能分析
## rtdp 21.26ms，每一步推理的平均耗时（包括预热31次）
conda activate equidiff
cd ~/Desktop/RTDP
python eval_sim.py --checkpoint /home/hy/Desktop/RTDP/data/outputs/2025.10.02/00.35.01_diff_c_stack_d1/checkpoints/epoch=0130-test_mean_score=0.9000.ckpt -o /home/hy/Desktop/RTDP/data/stack_d1_1002_rtdp

## ddpm 688.57ms，每一步推理的平均耗时（无需预热）
conda activate equidiff
cd ~/eqdp/equidiff-main
python eval.py --checkpoint /home/hy/eqdp/equidiff-main/data/outputs/2025.10.02/18.37.53_diff_c_stack_d1/checkpoints/epoch=0000-test_mean_score=0.000.ckpt -o /home/hy/Desktop/RTDP/data/stack_d1_1002_ddpm

## ddim 145.02ms，每一步推理的平均耗时（无需预热）
conda activate equidiff
cd ~/eqdp/equidiff-main
python eval.py --checkpoint /home/hy/eqdp/equidiff-main/data/outputs/2025.10.02/22.15.43_diff_c_stack_d1/checkpoints/epoch=0000-test_mean_score=0.020.ckpt -o /home/hy/Desktop/RTDP/data/stack_d1_1002_ddim




